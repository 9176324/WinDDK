<html xmlns:v="urn:schemas-microsoft-com:vml"
xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns:m="http://schemas.microsoft.com/office/2004/12/omml"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 12">
<meta name=Originator content="Microsoft Word 12">
<link rel=File-List href="pcidrv_files/filelist.xml">
<title>PCIDRV</title>
<link rel=themeData href="pcidrv_files/themedata.thmx">
<link rel=colorSchemeMapping href="pcidrv_files/colorschememapping.xml">
<!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:SpellingState>Clean</w:SpellingState>
  <w:GrammarState>Clean</w:GrammarState>
  <w:TrackMoves>false</w:TrackMoves>
  <w:TrackFormatting/>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:DoNotPromoteQF/>
  <w:LidThemeOther>EN-US</w:LidThemeOther>
  <w:LidThemeAsian>X-NONE</w:LidThemeAsian>
  <w:LidThemeComplexScript>X-NONE</w:LidThemeComplexScript>
  <w:Compatibility>
   <w:BreakWrappedTables/>
   <w:SnapToGridInCell/>
   <w:WrapTextWithPunct/>
   <w:UseAsianBreakRules/>
   <w:DontGrowAutofit/>
   <w:SplitPgBreakAndParaMark/>
   <w:DontVertAlignCellWithSp/>
   <w:DontBreakConstrainedForcedTables/>
   <w:DontVertAlignInTxbx/>
   <w:Word11KerningPairs/>
   <w:CachedColBalance/>
  </w:Compatibility>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
  <m:mathPr>
   <m:mathFont m:val="Cambria Math"/>
   <m:brkBin m:val="before"/>
   <m:brkBinSub m:val="&#45;-"/>
   <m:smallFrac m:val="off"/>
   <m:dispDef/>
   <m:lMargin m:val="0"/>
   <m:rMargin m:val="0"/>
   <m:defJc m:val="centerGroup"/>
   <m:wrapIndent m:val="1440"/>
   <m:intLim m:val="subSup"/>
   <m:naryLim m:val="undOvr"/>
  </m:mathPr></w:WordDocument>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" DefUnhideWhenUsed="true"
  DefSemiHidden="true" DefQFormat="false" DefPriority="99"
  LatentStyleCount="267">
  <w:LsdException Locked="false" Priority="0" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Normal"/>
  <w:LsdException Locked="false" Priority="9" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="heading 1"/>
  <w:LsdException Locked="false" Priority="9" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="heading 2"/>
  <w:LsdException Locked="false" Priority="9" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="heading 3"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 4"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 5"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 6"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 7"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 8"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 9"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 1"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 2"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 3"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 4"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 5"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 6"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 7"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 8"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 9"/>
  <w:LsdException Locked="false" Priority="35" QFormat="true" Name="caption"/>
  <w:LsdException Locked="false" Priority="10" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Title"/>
  <w:LsdException Locked="false" Priority="1" Name="Default Paragraph Font"/>
  <w:LsdException Locked="false" Priority="11" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Subtitle"/>
  <w:LsdException Locked="false" Priority="22" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Strong"/>
  <w:LsdException Locked="false" Priority="20" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Emphasis"/>
  <w:LsdException Locked="false" Priority="59" SemiHidden="false"
   UnhideWhenUsed="false" Name="Table Grid"/>
  <w:LsdException Locked="false" UnhideWhenUsed="false" Name="Placeholder Text"/>
  <w:LsdException Locked="false" Priority="1" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="No Spacing"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 1"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 1"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 1"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 1"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 1"/>
  <w:LsdException Locked="false" UnhideWhenUsed="false" Name="Revision"/>
  <w:LsdException Locked="false" Priority="34" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="List Paragraph"/>
  <w:LsdException Locked="false" Priority="29" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Quote"/>
  <w:LsdException Locked="false" Priority="30" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Intense Quote"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 1"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 1"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 1"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 1"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 1"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 1"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 2"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 2"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 2"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 2"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 2"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 2"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 2"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 2"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 3"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 3"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 3"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 3"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 3"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 3"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 3"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 3"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 4"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 4"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 4"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 4"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 4"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 4"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 4"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 4"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 5"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 5"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 5"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 5"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 5"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 5"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 5"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 5"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 6"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 6"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 6"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 6"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 6"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 6"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 6"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 6"/>
  <w:LsdException Locked="false" Priority="19" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Subtle Emphasis"/>
  <w:LsdException Locked="false" Priority="21" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Intense Emphasis"/>
  <w:LsdException Locked="false" Priority="31" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Subtle Reference"/>
  <w:LsdException Locked="false" Priority="32" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Intense Reference"/>
  <w:LsdException Locked="false" Priority="33" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Book Title"/>
  <w:LsdException Locked="false" Priority="37" Name="Bibliography"/>
  <w:LsdException Locked="false" Priority="39" QFormat="true" Name="TOC Heading"/>
 </w:LatentStyles>
</xml><![endif]-->
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:-1610611985 1107304683 0 0 415 0;}
@font-face
	{font-family:Cambria;
	panose-1:2 4 5 3 5 4 6 3 2 4;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:-1610611985 1073741899 0 0 415 0;}
@font-face
	{font-family:Verdana;
	panose-1:2 11 6 4 3 5 4 4 2 4;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:-1593833729 1073750107 16 0 415 0;}
@font-face
	{font-family:"MS Sans Serif";
	mso-font-alt:"Times New Roman";
	mso-font-charset:0;
	mso-generic-font-family:auto;
	mso-font-pitch:auto;
	mso-font-signature:0 0 0 0 0 0;}
@font-face
	{font-family:Consolas;
	panose-1:2 11 6 9 2 2 4 3 2 4;
	mso-font-charset:0;
	mso-generic-font-family:modern;
	mso-font-pitch:fixed;
	mso-font-signature:-520092929 1073806591 9 0 415 0;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-unhide:no;
	mso-style-qformat:yes;
	mso-style-parent:"";
	margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";
	mso-fareast-font-family:"Times New Roman";
	mso-fareast-theme-font:minor-fareast;
	color:black;}
h2
	{mso-style-priority:9;
	mso-style-unhide:no;
	mso-style-qformat:yes;
	mso-style-link:"Heading 2 Char";
	mso-margin-top-alt:auto;
	margin-right:0in;
	mso-margin-bottom-alt:auto;
	margin-left:0in;
	mso-pagination:widow-orphan;
	mso-outline-level:2;
	font-size:18.0pt;
	font-family:"Times New Roman","serif";
	mso-fareast-font-family:"Times New Roman";
	mso-fareast-theme-font:minor-fareast;
	color:black;
	font-weight:bold;}
h3
	{mso-style-priority:9;
	mso-style-unhide:no;
	mso-style-qformat:yes;
	mso-style-link:"Heading 3 Char";
	mso-margin-top-alt:auto;
	margin-right:0in;
	mso-margin-bottom-alt:auto;
	margin-left:0in;
	mso-pagination:widow-orphan;
	mso-outline-level:3;
	font-size:13.5pt;
	font-family:"Times New Roman","serif";
	mso-fareast-font-family:"Times New Roman";
	mso-fareast-theme-font:minor-fareast;
	color:black;
	font-weight:bold;}
a:link, span.MsoHyperlink
	{mso-style-noshow:yes;
	mso-style-priority:99;
	color:blue;
	text-decoration:underline;
	text-underline:single;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-noshow:yes;
	mso-style-priority:99;
	color:purple;
	text-decoration:underline;
	text-underline:single;}
p
	{mso-style-noshow:yes;
	mso-style-priority:99;
	mso-margin-top-alt:auto;
	margin-right:0in;
	mso-margin-bottom-alt:auto;
	margin-left:0in;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";
	mso-fareast-font-family:"Times New Roman";
	mso-fareast-theme-font:minor-fareast;
	color:black;}
pre
	{mso-style-noshow:yes;
	mso-style-priority:99;
	mso-style-link:"HTML Preformatted Char";
	margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt;
	font-size:10.0pt;
	font-family:"Courier New";
	mso-fareast-font-family:"Times New Roman";
	mso-fareast-theme-font:minor-fareast;
	color:black;}
span.Heading2Char
	{mso-style-name:"Heading 2 Char";
	mso-style-noshow:yes;
	mso-style-priority:9;
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:"Heading 2";
	font-family:"Cambria","serif";
	mso-ascii-font-family:Cambria;
	mso-hansi-font-family:Cambria;
	color:#4F81BD;
	font-weight:bold;}
span.Heading3Char
	{mso-style-name:"Heading 3 Char";
	mso-style-noshow:yes;
	mso-style-priority:9;
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:"Heading 3";
	font-family:"Cambria","serif";
	mso-ascii-font-family:Cambria;
	mso-hansi-font-family:Cambria;
	color:#4F81BD;
	font-weight:bold;}
span.HTMLPreformattedChar
	{mso-style-name:"HTML Preformatted Char";
	mso-style-noshow:yes;
	mso-style-priority:99;
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:"HTML Preformatted";
	font-family:Consolas;
	mso-ascii-font-family:Consolas;
	mso-hansi-font-family:Consolas;
	mso-bidi-font-family:Consolas;
	color:black;}
p.msochpdefault, li.msochpdefault, div.msochpdefault
	{mso-style-name:msochpdefault;
	mso-style-unhide:no;
	mso-margin-top-alt:auto;
	margin-right:0in;
	mso-margin-bottom-alt:auto;
	margin-left:0in;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman","serif";
	mso-fareast-font-family:"Times New Roman";
	mso-fareast-theme-font:minor-fareast;
	color:black;}
span.SpellE
	{mso-style-name:"";
	mso-spl-e:yes;}
span.GramE
	{mso-style-name:"";
	mso-gram-e:yes;}
.MsoChpDefault
	{mso-style-type:export-only;
	mso-default-props:yes;
	font-size:10.0pt;
	mso-ansi-font-size:10.0pt;
	mso-bidi-font-size:10.0pt;}
@page Section1
	{size:8.5in 11.0in;
	margin:1.0in 1.0in 1.0in 1.0in;
	mso-header-margin:.5in;
	mso-footer-margin:.5in;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
 /* List Definitions */
 @list l0
	{mso-list-id:138772046;
	mso-list-template-ids:2010944864;}
@list l0:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
@list l1
	{mso-list-id:192616120;
	mso-list-template-ids:-1819928608;}
@list l2
	{mso-list-id:679165256;
	mso-list-template-ids:1739911830;}
@list l3
	{mso-list-id:1053046520;
	mso-list-template-ids:1684324514;}
@list l3:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
@list l4
	{mso-list-id:1058673202;
	mso-list-template-ids:-1845839126;}
@list l4:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
@list l5
	{mso-list-id:1091852291;
	mso-list-template-ids:2111233808;}
@list l5:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
@list l6
	{mso-list-id:1239244123;
	mso-list-template-ids:1291193176;}
@list l6:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
@list l7
	{mso-list-id:1309439066;
	mso-list-template-ids:-76647812;}
@list l7:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
@list l8
	{mso-list-id:1598437769;
	mso-list-template-ids:-122525942;}
@list l8:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
@list l9
	{mso-list-id:1839692045;
	mso-list-template-ids:1894695728;}
@list l9:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
@list l10
	{mso-list-id:1908418111;
	mso-list-template-ids:-64953720;}
@list l11
	{mso-list-id:1917351318;
	mso-list-template-ids:-1398503912;}
@list l12
	{mso-list-id:2100634145;
	mso-list-template-ids:-54918424;}
@list l12:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}
-->
</style>
<!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Table Normal";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-priority:99;
	mso-style-qformat:yes;
	mso-style-parent:"";
	mso-padding-alt:0in 5.4pt 0in 5.4pt;
	mso-para-margin:0in;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman","serif";}
</style>
<![endif]-->
<meta name=Template content="C:\PROGRAM FILES\MICROSOFT OFFICE\OFFICE\html.dot">
<!--[if gte mso 9]><xml>
 <o:shapedefaults v:ext="edit" spidmax="2050"/>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <o:shapelayout v:ext="edit">
  <o:idmap v:ext="edit" data="1"/>
 </o:shapelayout></xml><![endif]-->
</head>

<body bgcolor=white lang=EN-US link=blue vlink=purple style='tab-interval:.5in'
leftmargin=8>

<div class=Section1>

<h2><a name=NETVMINI><span style='font-family:"Verdana","sans-serif";
mso-fareast-font-family:"Times New Roman"'>Sample WDM &amp; KMDF Drivers for
PCI Device</span></a><span style='font-family:"Verdana","sans-serif";
mso-fareast-font-family:"Times New Roman"'> </span><span style='mso-fareast-font-family:
"Times New Roman"'><o:p></o:p></span></h2>

<h3><span style='font-family:"Verdana","sans-serif";mso-fareast-font-family:
"Times New Roman"'>SUMMARY</span><span style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></h3>

<p><span style='font-size:10.0pt;font-family:"Verdana","sans-serif"'>This
sample contains two functionally equivalent drivers for Intel 82557/82558 based
PCI Ethernet Adapter (10/100) and Intel compatibles. The purpose of these samples
is to teach how to write a WDM and KMDF driver for a PCI device. Microsoft
recommendation is to use KMDF to write drivers instead of WDM. Both WDM and
KMDF versions are included to show the difference in complexity, and how KMDF
simplifies WDM, and also serve as a reference sample for porting WDM driver to
KMDF.</span></p>

<p><span style='font-size:10.0pt;font-family:"Verdana","sans-serif"'>The choice
of Intel Ethernet Adapter is made because the hardware is relatively
inexpensive, easily available, supports advanced hardware features such as
scatter-gather DMA, full fledge power management - ability to wake the machine
on external event (Wait-Wake), ability to power down the device when not in use
(Idle detection) - hardware <a
href="http://www.intel.com/products/ethernet/resource.htm">specification</a> is
publicly available, and the source code to interface with the hardware is also
available in the DDK. </span></p>

<p><span style='font-size:10.0pt;font-family:"Verdana","sans-serif"'>Following
is the list of key features demonstrated in the WDM sample. </span></p>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal style='mso-list:l3 level1 lfo1;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>How to map hardware resources in a platform independent
     manner. This sample shows how to determine whether the I/O BAR of a PCI
     device has been mapped into memory space or I/O space by just using the
     Translated resource list provided by the PNP manager, and use the
     appropriate <span class=SpellE>accessor</span> functions to read/write to
     the device. </span><span style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l3 level1 lfo1;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>How to do SCATTER GATHER DMA operation using the new
     DMA interfaces provided on Windows 2000. Depending on the build
     environment, it chooses to use the Win2K compliant, Version 0, DMA
     functions or Windows XP and later OS compliant, Version2 functions. <span
     class=SpellE>GetScatterGatherList</span> versus <span class=SpellE>BuildScatterGatherList</span>.
     </span><span style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l3 level1 lfo1;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>How to do software tracing that works on Windows 2000
     and beyond. You can control the tracing spew using Flags and Level values
     and also dump variable length buffers using HEXDUMP macros. The sample can
     be built to do boot-time tracing. Read Boot-Time tracing section in this
     document for more information on how to enable that. </span><span
     style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l3 level1 lfo1;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>This sample demonstrates all aspect of power
     management. It shows how to be a power policy owner of a device and do S-D
     state mappings, generate D-IRPs, generate Wait-wake IRPs, perform idle
     detection, and fast resume. Since there are inherent race conditions in
     the system provided power management APIs (<span class=SpellE>PoRegisterDeviceForIdleDetection</span>)
     for doing IDLE detection, this sample uses it own idle detection logic. </span><span
     style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></li>
</ul>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:"Verdana","sans-serif"'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:"Verdana","sans-serif";
color:windowtext'>Following is the list of key KMDF interfaces demonstrated in
KMDF version of this sample:&nbsp;</span></p>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal style='mso-list:l7 level1 lfo2;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>Handling PnP &amp; Power Events</span><span
     style='font-size:10.0pt;mso-fareast-font-family:"Times New Roman"'> </span><span
     style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l7 level1 lfo2;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>Registering Device Interface</span><span
     style='font-size:10.0pt;mso-fareast-font-family:"Times New Roman"'> </span><span
     style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l7 level1 lfo2;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>Hardware resource mapping: Port, Memory &amp;
     Interrupt. </span><span style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l7 level1 lfo2;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>DMA Interfaces</span><span style='font-size:10.0pt;
     mso-fareast-font-family:"Times New Roman"'> </span><span style='mso-fareast-font-family:
     "Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l7 level1 lfo2;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>Parallel default queue for write requests. If the write
     cannot be satisfied immediately, the request is put into a manual parallel
     queue.</span><span style='font-size:10.0pt;mso-fareast-font-family:"Times New Roman"'>
     </span><span style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l7 level1 lfo2;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>Parallel manual queue for Read requests</span><span
     style='font-size:10.0pt;mso-fareast-font-family:"Times New Roman"'> </span><span
     style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l7 level1 lfo2;tab-stops:list .5in'><span
     class=SpellE><span style='font-size:10.0pt;font-family:"Verdana","sans-serif";
     mso-fareast-font-family:"Times New Roman"'>Parallelc</span></span><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
     &nbsp;default queue for IOCTL requests. If the <span class=SpellE>ioctl</span>
     cannot be satisfied immediately, the request is put into a manual parallel
     queue.</span><span style='font-size:10.0pt;mso-fareast-font-family:"Times New Roman"'>
     </span><span style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l7 level1 lfo2;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>Request cancelation</span><span style='font-size:10.0pt;
     mso-fareast-font-family:"Times New Roman"'> </span><span style='mso-fareast-font-family:
     "Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l7 level1 lfo2;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>Handling Interrupt &amp; DPC</span><span
     style='font-size:10.0pt;mso-fareast-font-family:"Times New Roman"'> </span><span
     style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l7 level1 lfo2;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>Watchdog Timer DPC to monitor the device state.</span><span
     style='font-size:10.0pt;mso-fareast-font-family:"Times New Roman"'> </span><span
     style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l7 level1 lfo2;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>Event Tracing &amp; HEXDUMP</span><span
     style='font-size:10.0pt;mso-fareast-font-family:"Times New Roman"'> </span><span
     style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l7 level1 lfo2;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>Reading &amp; Writing to the registry</span><span
     style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></li>
</ul>

<p><span style='font-size:10.0pt;font-family:"Verdana","sans-serif"'>On Windows
platform, drivers for network devices have to be an NDIS miniport driver. Only
then protocols can bind and perform network transfer. So the question comes to
mind is, how can a generic KMDF (or WDM) driver be used for a network
controller? </span></p>

<p><span style='font-size:10.0pt;font-family:"Verdana","sans-serif"'>Well, for
illustration purposes, this sample driver has been written in this manner. Real
driver for network devices should be written using NDIS. However, this sample
driver can be made to work as an NDIS miniport by using another NDIS-WDM sample
driver from the DDK as an upper filter. Detail about two different configurations
in which these samples can be used is given below.</span></p>

<p><span style='font-size:10.0pt;font-family:"Verdana","sans-serif"'>The WDM
interface in this sample is based on the Toaster function driver, and all the
code to access the hardware is taken from the E100BEX NDIS miniport sample from
the DDK and converted to use WDM interfaces instead of NDIS functions. The
sample has been written in such a way, separating all the hardware specific
code in separate modules and isolating them in a subdirectory, it can be easily
adapted to work for any PCI and PCMCIA device.</span></p>

<p><span style='font-size:10.0pt;font-family:"Verdana","sans-serif"'>Note: This
sample provides an example of a minimal driver intended for educational
purposes. Neither the driver nor its sample test programs are intended for use
in a production environment. </span></p>

<p><span style='font-size:10.0pt;font-family:"Verdana","sans-serif"'>As stated
earlier, this sample is meant to demonstrate how to write a KMDF (or WDM)
driver for a generic PCI device. This sample doesn't espouse that you write a
KMDF (or WDM) driver with an NDIS edge for PCI network controllers. For network
controllers, you should write a monolithic NDIS miniport driver based on the
samples given under the <span class=SpellE>src</span>\network\<span
class=SpellE>ndis</span> directory. </span></p>

<p><span style='font-size:10.0pt;font-family:"Verdana","sans-serif"'>Note that
it is still possible to use a subset of KMDF APIs when writing a NDIS miniport
(see <span class=SpellE>src</span>\network\<span class=SpellE>ndis</span>\<span
class=SpellE>usbnwifi</span> directory for a sample on how to use KMDF
interfaces to talk to USB device in an NDIS miniport).</span></p>

<p><span style='font-size:10.0pt;font-family:"Verdana","sans-serif"'>The sample
driver has been tested on the following Intel Ethernet controllers: </span></p>

<table class=MsoNormalTable border=1 cellspacing=3 cellpadding=0 width="100%"
 style='width:100.0%;mso-cellspacing:1.5pt;mso-yfti-tbllook:1184;mso-padding-alt:
 0in 0in 0in 0in'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes'>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal><b>Device <span class=SpellE>Desc</span></b></p>
  </td>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal><b>Hardware ID</b></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:1'>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal>IBM <span class=SpellE>Netfinity</span> 10/100 Ethernet
  Adapter</p>
  </td>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal>PCI\VEN_8086&amp;DEV_1229&amp;SUBSYS_005C1014&amp;REV_05</p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:2'>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal>Intel(R) PRO/100+ Management Adapter with Alert On LAN</p>
  </td>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal>PCI\VEN_8086&amp;DEV_1229&amp;SUBSYS_000E8086&amp;REV_08</p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:3'>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal>Intel 8255x-based PCI Ethernet Adapter (10/100)</p>
  </td>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal>PCI\VEN_8086&amp;DEV_1229&amp;SUBSYS_00000000&amp;REV_01</p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:4'>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal>Intel Pro/100 S Server Adapter</p>
  </td>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal>PCI\VEN_8086&amp;DEV_1229&amp;SUBSYS_00508086&amp;REV_0D</p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:5'>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal>Intel 8255x-based PCI Ethernet Adapter (10/100)</p>
  </td>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal>PCI\VEN_8086&amp;DEV_1229&amp;SUBSYS_00031179&amp;REV_08</p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:6'>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal>Intel(R) PRO/100 VE Network Connection</p>
  </td>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal>PCI\VEN_8086&amp;DEV_103D&amp;SUBSYS_00011179&amp;REV_83</p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:7'>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal>Intel(R) PRO/100 VM Network Connection</p>
  </td>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal>PCI\VEN_8086&amp;DEV_1031&amp;REV_42</p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:8'>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal>Intel(R) PRO/100 VE Network Connection</p>
  </td>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal>PCI\VEN_8086&amp;DEV_1038&amp;REV_41</p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:9'>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal>Intel(R) PRO/100 SR Mobile Adapter</p>
  </td>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal>PCI\VEN_8086&amp;DEV_1229</p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:10'>
  <td style='padding:.75pt .75pt .75pt .75pt'></td>
  <td style='padding:.75pt .75pt .75pt .75pt'></td>
 </tr>
 <tr style='mso-yfti-irow:11;mso-yfti-lastrow:yes'>
  <td style='padding:.75pt .75pt .75pt .75pt'></td>
  <td style='padding:.75pt .75pt .75pt .75pt'></td>
 </tr>
</table>

<p><span style='font-size:10.0pt;font-family:"Verdana","sans-serif"'>Click <a
href="http://www.intel.com/support/network/adapter/pro100/24659.htm#2">here</a>
to get a complete list of Intel Network adapters.</span></p>

<p><span style='font-size:10.0pt;font-family:"Verdana","sans-serif"'>The driver
can be installed in the Windows 2000 and later operating systems. </span></p>

<h3><span style='font-family:"Verdana","sans-serif";mso-fareast-font-family:
"Times New Roman"'>Using this sample as a Miniport </span><span
style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></h3>

<pre>&nbsp;</pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ---------------------</pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TCP/IP&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ---------------------</pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ^</pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | &lt;-------------- NDIS Interface (I/Os done using NDIS Packets)</pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; V</pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ---------------------</pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp; NDISWDM Miniport<span
class=GramE>&nbsp; |</span></pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp; (NDISEDGE.SYS)&nbsp;&nbsp; | &lt;-- Installed as an Upper Device Filter</pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ---------------------</pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ^</pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | &lt;--------------- IRPs (I/Os done using IRPs)</pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; V</pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ---------------------</pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; PCIDRV.SYS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | &lt;-- Installed as a function driver</pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ---------------------</pre><pre>&nbsp;&nbsp; </pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;^</pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | &lt;-------------- Talk to the hardware using I/O resources&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; </pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;V&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; </pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;---------------</pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp; H/w NIC&nbsp;&nbsp;&nbsp; |</pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ---------------</pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|||||||</pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -------&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</pre>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:"Verdana","sans-serif"'>You
can install the driver as a Net class driver using NETDRV.INF, and use the
device as a fully functional network device. The picture above shows the stack
layout in this configuration. The driver stack consists of NDIS-WDM driver as
an upper device filter and PCIDRV as the function driver for the device. The
NDIS-WDM driver registers with NDIS as a miniport so that the stack can be
bound to all the protocol drivers and receive NDIS requests. The PCIDRV maps
all the hardware resources (received in IRP_MN_START_DEVICE) and performs the
job of reading and writing to the hardware. All the NDIS requests received by
the NDIS-WDM driver is converted into IRPs and forwarded to the PCIDRV driver. </span></p>

<p><span style='font-size:10.0pt;font-family:"Verdana","sans-serif"'>In this
configuration, the NDIS acts as the power policy owner of the device and
performs the job of converting S-IRPs to D-IRPs and sending Wait-Wake IRPs. The
PCIDRV remains passive and mostly forwards the Power and WMI requests. </span></p>

<h3><span style='font-family:"Verdana","sans-serif";mso-fareast-font-family:
"Times New Roman"'>Using this sample as a standalone driver</span><span
style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></h3>

<pre>&nbsp;</pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ---------------------</pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MYPING&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | &lt;-- <span
class=SpellE>Usermode</span> test application</pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</pre><pre>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;---------------------</pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ^</pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span
class=SpellE>UserMode</span></pre><pre> -------------------------------------------------------------------------&nbsp; </pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
class=SpellE>KernelMode</span></pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; V</pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ---------------------</pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PCIDRV&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | &lt;-- Installed as a function driver</pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ---------------------</pre><pre>&nbsp;&nbsp; </pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;^</pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | &lt;-------------- Talk to the hardware using I/O resources&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; </pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;V&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; </pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;---------------</pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp; H/w NIC&nbsp;&nbsp;&nbsp; |</pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ---------------</pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |||||||</pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -------&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </pre><pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</pre>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:"Verdana","sans-serif"'>You
can install the driver as a standalone driver of a custom setup class, called
Sample Class using GENPCI.INF. The PCI device is not seen as a network
controller and as a result no protocol driver is bound to the device. In order
to test the read &amp; write path of the driver, you can use the specially developed
ping application, called MYPING. This test application crafts the entire
Ethernet frame in <span class=SpellE>usermode</span> and sends it to the driver
to be transferred on the wire. In this configuration, you can only ping another
machine on the same subnet. The application does all the ARP and AARP
resolution in the <span class=SpellE>usermode</span> to get the MAC address of
the target machine and sends ICMP ECHO requests. </span></p>

<p><span style='font-size:10.0pt;font-family:"Verdana","sans-serif"'>The PCIDRV
sample acts as a power policy owner of the device and implements all the
wait-wake and idle detection logic. </span></p>

<h3><span style='font-family:"Verdana","sans-serif";mso-fareast-font-family:
"Times New Roman"'>BUILDING THE SAMPLE</span><span style='mso-fareast-font-family:
"Times New Roman"'><o:p></o:p></span></h3>

<p><b><span style='font-size:10.0pt;font-family:"Verdana","sans-serif"'>To
build NDISEDGE.SYS (Upper device filter)</span></b><span style='font-size:10.0pt;
font-family:"Verdana","sans-serif"'> </span></p>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal style='mso-list:l6 level1 lfo3;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>Click the <b>Free Build Environment</b> or <b>Checked
     Build Environment</b> icon under your Development Kit's<b> </b>program
     group to set basic environment variables needed by the build utility. </span><span
     style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l6 level1 lfo3;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>Change to the directory containing the device source
     code, such as CD <span class=SpellE>Src</span>\network\<span class=SpellE>ndis</span>\NDISWDM.
     </span><span style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l6 level1 lfo3;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>Update the 'sources' file to change the TARGETNAME from
     NDISWDM to NDISEDGE, and comment or remove
     &quot;-DINTERFACE_WITH_NDISPROT=1&quot; from C_DEFINES statement. </span><span
     style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l6 level1 lfo3;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>Build the driver by typing <b>BLD</b>. </span><span
     style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></li>
</ul>

<p class=MsoNormal style='margin-left:.5in'>&nbsp;</p>

<p class=MsoNormal><b><span style='font-size:10.0pt;font-family:"Verdana","sans-serif"'>To
build PCIDRV.SYS (Function driver)</span></b><span style='font-size:10.0pt;
font-family:"Verdana","sans-serif"'> </span></p>

<p class=MsoNormal>&nbsp;</p>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal style='mso-list:l4 level1 lfo4;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>Click the <b>Free Build Environment</b> or <b>Checked
     Build Environment</b> icon under your Development Kit's<b> </b>program
     group to set basic environment variables needed by the build utility. </span><span
     style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l4 level1 lfo4;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>Change to the directory containing the device source
     code, such as CD <span class=SpellE>Src</span>\general\PCIDRV\. </span><span
     style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l4 level1 lfo4;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>Build the driver by typing <b>BLD</b>. </span><span
     style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></li>
</ul>

<p><b><span style='font-size:10.0pt;font-family:"Verdana","sans-serif"'>Build -<span
class=SpellE>ceZ</span></span></b><span style='font-size:10.0pt;font-family:
"Verdana","sans-serif"'>, or the macro <b>BLD</b> invokes the Microsoft make
routines that produce log files called Buildxxx_yyy_zzz.log, and also
Buildxx_yyy_zzz.wrn and Buildxx_yyy_zzz.err if there are any warnings or
errors. Where xxx stands for <span class=SpellE><b>fre</b></span> or <span
class=SpellE><b>chk</b></span> depending on the environment chosen, <span
class=SpellE>yyy</span> stands for the OS version (W2K, WXP, or <span
class=SpellE>Wnet</span>), and <span class=SpellE>zzz</span> stands for
platform version (x86, IA64, or AMD64).</span></p>

<p><span style='font-size:10.0pt;font-family:"Verdana","sans-serif"'>If the
build succeeds, the driver will be placed in the binary output directory
specified for the build environment. You can get the output path from the
buildxxx.log file.</span></p>

<h3><span style='font-family:"Verdana","sans-serif";mso-fareast-font-family:
"Times New Roman"'>INSTALLATION </span><span style='mso-fareast-font-family:
"Times New Roman"'><o:p></o:p></span></h3>

<p><span style='font-size:10.0pt;font-family:"Verdana","sans-serif"'>The driver
can be installed as a Net class driver or as a standalone driver (user defined
class). Depending on whether you are using the WDM or KMDF version, please pick
up the correct INF files from the respective folder. The KMDF versions of the
INF files are dynamically generated from .INX file. In addition to the driver
files, you have to include the WDF <span class=SpellE>coinstaller</span> DLL from
the <span class=SpellE>src</span>\<span class=SpellE>redist</span>\<span
class=SpellE>wdf</span> folder of the WDK.</span></p>

<p><span style='font-size:10.0pt;font-family:"Verdana","sans-serif"'>As a <b>Net
Class</b> driver on Windows XP and later system: </span></p>

<ol style='margin-top:0in' start=1 type=1>
 <li class=MsoNormal style='mso-list:l2 level1 lfo6;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>Build NDISEDGE.SYS as described above in a XP and later
     build environment to get the NDIS version 5.1 <span class=GramE>driver</span>.</span><span
     style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l2 level1 lfo6;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>Build PCIDRV.SYS in XP or Server 2003 build
     environment.</span><span style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l2 level1 lfo6;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>Copy the drivers and the <i>NETDRV.INF</i> file to a
     floppy disk or to a directory on the target test machine. Driver should be
     copied under appropriate subdirectory (i386, ia64, amd64).</span><span
     style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l2 level1 lfo6;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>Launch the Device Manager (by clicking on Windows
     Start, Run option and type Devmgmt.msc).</span><span style='mso-fareast-font-family:
     "Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l2 level1 lfo6;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>Select the Intel network controller in the device
     manager, right click to get the Properties menu and select <b>Updater
     Driver...</b>.</span><span style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l2 level1 lfo6;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>Select <b>Driver</b> Tab.</span><span style='mso-fareast-font-family:
     "Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l2 level1 lfo6;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>Click on <b>Update Driver...</b> button. This will take
     you to <b>Hardware Update Wizard</b>.</span><span style='mso-fareast-font-family:
     "Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l2 level1 lfo6;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>Select <b>Install from a list of specific location
     (Advanced)</b>, and then click <b>Next</b>. </span><span style='mso-fareast-font-family:
     "Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l2 level1 lfo6;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>Select <span class=GramE><b>Don't</b></span><b> search.
     I will choose the driver to <span class=GramE>install<span
     style='font-weight:normal'>,</span></span></b> and then click <b>Next</b>.
     </span><span style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l2 level1 lfo6;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>Click <b>Have Disk</b>, and point to the directory that
     contains NETDRV.INF file.</span><span style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l2 level1 lfo6;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>Select <b>Sample WDM PCI Driver <span class=GramE>For
     Ethernet Adapter With</span> NDIS Upper Edge</b>, and then click <b>Next</b>.
     </span><span style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l2 level1 lfo6;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>If you get a Warning dialog about installing driver
     that's not compatible with the hardware. Click No and exit the Wizard.</span><span
     style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l2 level1 lfo6;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>Otherwise, you will get a warning dialog about
     installing unsigned driver. Click <b>Continue Anyway</b> and complete the
     driver upgrade.</span><span style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></li>
</ol>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:"Verdana","sans-serif"'>&nbsp;</span></p>

<p><span style='font-size:10.0pt;font-family:"Verdana","sans-serif"'>To install
as a <b>standalone</b> driver Windows XP and later operating systems: </span></p>

<ol style='margin-top:0in' start=1 type=1>
 <li class=MsoNormal style='mso-list:l10 level1 lfo8;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>Build PCIDRV.SYS in XP or Server 2003 build
     environment.</span><span style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l10 level1 lfo8;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>Copy the driver, test application and the <i>GENPCI.INF</i>
     file to a floppy disk or to a directory on the target test machine. Driver
     should be copied under appropriate subdirectory (i386, ia64, amd64).</span><span
     style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l10 level1 lfo8;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>Launch the Device Manager (by clicking on Windows
     Start, Run option and type Devmgmt.msc).</span><span style='mso-fareast-font-family:
     "Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l10 level1 lfo8;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>Select the Intel network controller in the device
     manager, right click to get the Properties menu and select <b>Updater
     Driver...</b>.</span><span style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l10 level1 lfo8;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>Select <b>Driver</b> Tab.</span><span style='mso-fareast-font-family:
     "Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l10 level1 lfo8;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>Click on <b>Update Driver...</b> button. This will take
     you to <b>Hardware Update Wizard</b>.</span><span style='mso-fareast-font-family:
     "Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l10 level1 lfo8;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>Select <b>Install from a list of specific location
     (Advanced)</b>, and then click <b>Next</b>. </span><span style='mso-fareast-font-family:
     "Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l10 level1 lfo8;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>Select <span class=GramE><b>Don't</b></span><b> search.
     I will choose the driver to <span class=GramE>install<span
     style='font-weight:normal'>,</span></span></b> and then click <b>Next</b>.
     </span><span style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l10 level1 lfo8;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>Click <b>Have Disk</b>, and point to the directory that
     contains GENPCI.INF file.</span><span style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l10 level1 lfo8;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>Select <b>Sample WDM PCI <span class=GramE>For</span>
     Intel 8255x Ethernet Controller</b>, and then click <b>Next</b>. </span><span
     style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l10 level1 lfo8;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>If you get a Warning dialog about installing driver
     that's not compatible with the hardware. Click No and exit the Wizard.</span><span
     style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l10 level1 lfo8;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>Otherwise, you will get a warning dialog about
     installing unsigned driver. Click <b>Continue Anyway</b> and complete the
     driver upgrade.</span><span style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></li>
</ol>

<h3><span style='font-family:"Verdana","sans-serif";mso-fareast-font-family:
"Times New Roman"'>TESTING</span><span style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></h3>

<p><span style='font-size:10.0pt;font-family:"Verdana","sans-serif"'>To test
the miniport configuration: Install NDIS Tester from the <a
href="http://www.microsoft.com/whdc/winlogo/default.mspx">WHQL Web site</a> and
run all the client and server tests. </span></p>

<p><span style='font-size:10.0pt;font-family:"Verdana","sans-serif"'>To test
standalone driver configuration: You should use the specially developed ping
application, called MYPING that comes with the sample. The Ping.exe provided in
the system will not work because in this configuration, the test card is not
bound to any network protocol - it's not seen as Net device by the system.
Currently the test application doesn't have ability to get an IP address from a
network DHCP server. As a result, it is better to connect the network device to
a private hub and ping another machine connected to that hub. For example, let
us say you have a test machine <span class=GramE>A</span> and another machine B
(development box). </span></p>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal style='mso-list:l12 level1 lfo9;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>Connect machine A and Machine B to a local hub.</span><span
     style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l12 level1 lfo9;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>Assign a static IP <span class=GramE>address,</span>
     say 128.0.0.1 to the NIC on machine B.</span><span style='mso-fareast-font-family:
     "Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l12 level1 lfo9;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>Clear the ARP table on machine B by running <b>Arp -d</b>
     on the command line</span><span style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l12 level1 lfo9;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>Now run <b>Myping.exe</b>. This application enumerates
     GUID_DEVINTERFACE_PCIDRV and displays the name of the devices with an
     index number. This number will be used in identifying the interface when
     you invoke ping dialog. </span><span style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l12 level1 lfo9;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>In the ping dialog specify the following and click
     okay: </span><span style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></li>
</ul>

<pre style='margin-left:.5in;text-indent:-.25in'><span style='font-family:Symbol'></span><span
style='font-size:7.0pt;font-family:"Times New Roman","serif"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&nbsp;</pre><pre
style='margin-left:.5in;text-indent:-.25in'><span style='font-family:Symbol'></span><span
style='font-size:7.0pt;font-family:"Times New Roman","serif"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Device Index: 1 &lt;- number displayed in the list window</pre><pre
style='margin-left:.5in;text-indent:-.25in'><span style='font-family:Symbol'></span><span
style='font-size:7.0pt;font-family:"Times New Roman","serif"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Source <span
class=SpellE>Ip</span> Address: 128.0.0.4 &lt;- You can make up any valid IP address for test Machine A</pre><pre
style='margin-left:.5in;text-indent:-.25in'><span style='font-family:Symbol'></span><span
style='font-size:7.0pt;font-family:"Times New Roman","serif"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Destination IP Address: 128.0.0.1 &lt;- IP address of machine B</pre><pre
style='margin-left:.5in;text-indent:-.25in'><span style='font-family:Symbol'></span><span
style='font-size:7.0pt;font-family:"Times New Roman","serif"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Packet Size: 1428 &lt;- Default max size of ping payload. Minimum value is 32 bytes.</pre>

<p class=MsoNormal style='margin-left:.25in'><span style='font-size:10.0pt;
font-family:"Verdana","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:.25in'><span style='font-size:10.0pt;
font-family:"Verdana","sans-serif"'>If the machine B has more than one adapter
and if the second adapter is connected to the internet (Corporate Network),
instead of assigning static IP address to the adapter that's connected to the
test machine, you can install Internet Connection Sharing (ICS) on it and get
an IP address for ICS. This would let you use the test machine to browse the
internet when the sample is installed in the miniport configuration and also in
the standalone mode without making up or stealing somebody's IP address. For
example, let us say the machine B has two adapters NIC1 and NIC2. NIC1 is
connected to the <span class=SpellE>CorpNet</span> and NIC2 is connected to the
private hub. Install ICS on NIC2 as described below: <o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.25in'><o:p>&nbsp;</o:p></p>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal style='mso-list:l8 level1 lfo11;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>Select the NIC2 in the Network Connections Applet. </span><span
     style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l8 level1 lfo11;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>Click on the <b>Properties</b> button. </span><span
     style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l8 level1 lfo11;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>Go to the Advanced Tab and Check the box &quot;Allow <span
     class=GramE>Other</span> network users to connect through this computers
     internet connection&quot; in the Internet Connection Sharing choice. </span><span
     style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l8 level1 lfo11;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>This will assign 192.168.0.1 IP address to NIC2. </span><span
     style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l8 level1 lfo11;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>Now on machine B, you can assume 192.168.0.2 as the
     local IP address and run <span class=GramE><b>Myping.exe </b>.</span> Or,
     you can install the sample in the miniport configuration and browse the
     internet. </span><span style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></li>
</ul>

<p style='text-indent:.25in'><span style='font-size:10.0pt;font-family:"Verdana","sans-serif"'>Other
menu options of <span class=SpellE>myping</span> applications are: </span></p>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal style='mso-list:l5 level1 lfo12;tab-stops:list .5in'><span
     class=SpellE><span style='font-size:10.0pt;font-family:"Verdana","sans-serif";
     mso-fareast-font-family:"Times New Roman"'>Reenumerate</span></span><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'> All <span class=GramE>Device</span>: This command lets
     you terminate active ping threads and close handle to all the device and <span
     class=SpellE>reenumerate</span> the devices again and display their names
     with index numbers. This might cause the devices to have new index
     numbers. </span><span style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l5 level1 lfo12;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>Cleanup: This command terminates ping threads and
     closes handles to all the devices. </span><span style='mso-fareast-font-family:
     "Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l5 level1 lfo12;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>Clear Display: Clears the window. </span><span
     style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l5 level1 lfo12;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>Verbose: Let you get more debug messages. </span><span
     style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l5 level1 lfo12;tab-stops:list .5in'><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>Exit: Terminate the application. </span><span
     style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></li>
</ul>

<p><span style='font-size:10.0pt;font-family:"Verdana","sans-serif"'>NOTE: You
can use this application only on a device installed in the standalone
configuration. If you run it on a device that's installed as a miniport, you
will get an error message. For such devices, you can use the system provided
ping.exe. </span></p>

<h3><span style='font-family:"Verdana","sans-serif";mso-fareast-font-family:
"Times New Roman"'>CODE TOUR (WDM only)</span><span style='mso-fareast-font-family:
"Times New Roman"'><o:p></o:p></span></h3>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:"Verdana","sans-serif"'>This
section describes some of the implementation details of the driver: </span></p>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal style='mso-list:l0 level1 lfo13;tab-stops:list .5in'><span
     class=SpellE><b><span style='font-size:10.0pt;font-family:"Verdana","sans-serif";
     mso-fareast-font-family:"Times New Roman"'>IsUpperEdgeNDIS</span></b></span><b><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>:</span></b><span style='font-size:10.0pt;font-family:
     "Verdana","sans-serif";mso-fareast-font-family:"Times New Roman"'> When
     you install the driver in the miniport configuration, the INF file creates
     a registry entry under the hardware key,
     HKLM\SYSTEM\CurrentControlSet\Enum\PCI\PCI\VEN_8086&amp;DEV_1229&amp;SUBSYS_00031179&amp;REV_08\4&amp;3b1caf2b&amp;0&amp;50F0\Device
     Parameters\<span class=SpellE>IsUpperEdgeNDIS</span>. This registry value
     enables the PCIDRV to determine whether it's running in a miniport
     configuration or not (Another approach without creating a special registry
     entry would be to read the class name using <span class=SpellE>IoGetDeviceProperty</span>(<span
     class=SpellE>DevicePropertyClassName</span>), just like the <span
     class=SpellE>myping</span> app does). In the miniport configuration, the
     driver doesn't do any power management because the upper filter,
     NDISEDGE.SYS, in conjunction with NDIS acts as power policy owner for the
     device and performs S-D mappings and generates WAIT_WAKE <span
     class=SpellE>Irps</span>. </span><span style='mso-fareast-font-family:
     "Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l0 level1 lfo13;tab-stops:list .5in'><b><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>Idle Detection:</span></b><span style='font-size:10.0pt;
     font-family:"Verdana","sans-serif";mso-fareast-font-family:"Times New Roman"'>
     The Power manager interfaces provided on Windows 2000 thru Server 2003 for
     registering <span class=GramE>Idle</span> detection has synchronization
     issues. When the system is going into lower power state, it doesn't
     disable idle detection as a result you could get D-IRP to go to a lower
     power state while your driver is in the middle of generating another D-IRP
     to go to standby. Let us say, a device has registered for idle detection,
     and wants to be sent a D1 <span class=SpellE>irp</span> when idle. Later
     on the systems going into standby at S3, which corresponds to D3 for this
     device. The S3 <span class=SpellE>Irp</span> goes down the stack, and
     right then we detect that this device is idle and send it the D1 <span
     class=SpellE>irp</span>. The device could see (S3, D3, <span class=GramE>D1</span>)
     or (S3, D1, D3). The first case can be particularly disastrous, especially
     if it thinks its now at D1, but <span class=GramE>its</span> bus is at
     some lesser D state. </span><span style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l0 level1 lfo13;tab-stops:list .5in'><b><span
     style='font-size:10.0pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
     "Times New Roman"'>Fast Resume:</span></b><span style='font-size:10.0pt;
     font-family:"Verdana","sans-serif";mso-fareast-font-family:"Times New Roman"'>
     To enable system to resume from suspend really quick, a driver should
     complete S0 IRP immediately, then request a D0 IRP. This allows the system
     to complete resuming while the driver performs device-specific
     re-initialization in the background. Since there is no synchronization
     between PnP and Power manager while generating a D-IRP, drivers have to
     make sure that their device doesn't get stopped or removed while they are
     handling a D-IRP. One technique would be to keep the S-IRP hostage until
     the corresponding D-IRP is completed. But then this approach delays the
     system boot because the devices are powered up serially, waiting for the
     S0 IRP sent on a device to be completed before moving on to another
     device. Keeping the fast resume goal and the system limitation in mind,
     this sample completes the SO IRP before requesting a D0-IRP and at the
     same time uses a <span class=SpellE>remlock</span> scheme to hold the PNP
     IRPs while the driver is in the middle of receiving a previously requested
     DO-IRP. </span><span style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></li>
</ul>

<h3><span style='font-family:"Verdana","sans-serif";mso-fareast-font-family:
"Times New Roman"'>RESOURCES</span><span style='mso-fareast-font-family:"Times New Roman"'><o:p></o:p></span></h3>

<p><span style='font-size:10.0pt;font-family:"Verdana","sans-serif"'>For the
latest release of the Windows device Driver Development Kit, see <a
href="http://www.microsoft.com/whdc/">http://www.microsoft.com/whdc/</a>.</span></p>

<p><span style='font-size:10.0pt;font-family:"Verdana","sans-serif"'>If you
have questions on using or adapting this sample for your project, you can either
contact <a href="http://support.microsoft.com/">Microsoft Technical Support</a>
or post your questions in the <a
href="http://www.microsoft.com/communities/newsgroups/en-us/?dg=microsoft.public.development.device.drivers">Microsoft
driver development newsgroup</a>. </span></p>

<h3><span style='font-family:"Verdana","sans-serif";mso-fareast-font-family:
"Times New Roman"'>FILE MANIFEST </span><span style='mso-fareast-font-family:
"Times New Roman"'><o:p></o:p></span></h3>

<pre><u>File&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Description</u></pre><pre>&nbsp;</pre><pre>WDM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Contains WDM version of the driver.</pre><pre><span
class=GramE>WDM\HW&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Contains hardware specific code.</span></pre><pre>KMDF&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Contains KMDF version of the driver.</pre><pre><span
class=GramE>KMDF\HW&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Contains hardware specific code.</span></pre><pre>TEST&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Contains source of test application (MYPING).</pre>

<p align=center style='text-align:center'><span style='font-size:10.0pt;
font-family:"Verdana","sans-serif"'><a href="#top">Top of page</a> </span></p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 width=936
 style='width:6.5in;mso-cellspacing:0in;mso-yfti-tbllook:1184;mso-padding-alt:
 0in 0in 0in 0in'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes;
  height:1.5pt'>
  <td style='background:aqua;padding:.75pt .75pt .75pt .75pt;height:1.5pt'></td>
 </tr>
</table>

<p><span style='font-size:7.5pt;font-family:"MS Sans Serif"'> 2003 Microsoft
Corporation. All rights reserved.</span><span style='font-size:10.0pt;
font-family:"Verdana","sans-serif"'> </span></p>

</div>

</body>

</html>

